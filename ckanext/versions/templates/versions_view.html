<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
  integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
  integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

{% set release_names = [
  'My-new-release',
  '2021-Q2',
  '2021-Q1',
  '2020-Q4',
  '2020-Q3',
  'Inital-Release'
] %}

{% set notes = [
  'Restored from <a href="#">2020 Q4</a>',
  'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt.',
  'Labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip.',
  '',
  'Sunt in culpa qui officia deserunt mollit anim id est laborum.',
  'Excepteur sint occaecat cupidatat non proident.',
  ] %}

{# start test versioning #}
<div class="row">
  <div class="col-md-10 col-md-offset-1">
    <div class="module-content">

      <!-- <div class="alert alert-success">
        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
        Release deleted
      </div> -->

      <style>
        #ReleasesListView .list-group-item{
          min-height: 120px;
        }
        #ReleasesListView h4{
          margin-top: 15px;
          margin-left: 0px;
          margin-right: 0;
          margin-bottom: -10px;
        }
        #ReleasesListView .release-notes,
        #ReleasesListView .release-author{
          margin-left: 30px;
        }
      </style>      
      <ul id="ReleasesListView" class="list-group">
        {% for version in versions*5 %}
          <li class="list-group-item">            
            <h4>
              <i class="fa fa-tag fa-fw text-muted"></i>
              <span> <a href="#">{{ release_names[loop.index-1] }}</a></span>
            </h4>         
            <div class="row">
              <div class="col-xs-6">
                <div class="text-muted release-notes">{{ notes[loop.index-1] | safe }}</div>
                <div class="text-muted release-author">Created by <a href="#">Manoj Nathwani</a></div>
              </div>
              <div class="col-xs-3 col-xs-offset-1">                
                <div>21/04/2021 10:59</div>
              </div>
              <div class="col-xs-2">
                <div class="btn-group pull-right btn-group-xs">
                  <button
                    type="button" class="btn btn-default"
                    data-toggle="tooltip" data-placement="bottom" title="Make release the latest version"
                  ><i class="fa fa-refresh"></i></button>
                  <button
                    type="button" class="btn btn-default"
                    data-toggle="tooltip" data-placement="bottom" title="Make release the latest version"
                  ><i class="fa fa-pencil"></i></button>
                  <button 
                    type="button" class="btn btn-default"
                    data-toggle="tooltip" data-placement="bottom" title="Delete Release"
                  ><i class="fa fa-trash"></i></button>
                </div>
              </div>
            </div>
          </li>
        {% endfor %}
      </ul>

      <!-- <style>
        .table a{
          text-decoration: underline;
        }
        .form-control{
          max-width: 400px;
        }
      </style>
      <table class="table table-striped table-bordered table-hover" data-module="table-toggle-more">
        <thead>
          <tr>
            <th scope="col" style="font-size: 14px; font-weight: normal; width: 120px;">{{ _('Release') }}</th>
            <th scope="col" style="font-size: 14px; font-weight: normal;">{{ _('Notes') }}</th>
            <th scope="col" style="font-size: 14px; font-weight: normal; width: 180px;">{{ _('Created') }}</th>
            <th scope="col" style="font-size: 14px; font-weight: normal; width: 100px;">{{ _('Created by') }}</th>
            <th scope="col" style="font-size: 14px; font-weight: normal; width: 120px;">{{ _('Actions') }}</th>
          </tr>
        </thead>
        <tbody>
          {% for version in versions*5 %}
          <tr role="row">
            <td>
              <a href="#">{{ release_names[loop.index-1] }}</a>
              <br>
              {% if loop.index-1 == 0 %}
                <span class="label label-danger">Current</span>
              {% endif %}
            </td>            
            <td>{{ notes[loop.index-1] | safe }}</td>
            <td>21/04/2021 10:59</td>
            <td>{{ h.linked_user(version.creator_user_id) }}</td>
            <td>              
              <div class="btn-group btn-group-xs">
                {% if loop.index-1 != 0 %}
                  <button
                    type="button" class="btn btn-default"
                    data-toggle="tooltip" data-placement="bottom" title="Make release the latest version"
                  >Restore</button>
                {% endif %}
                <button 
                  type="button" class="btn btn-default"
                  data-toggle="tooltip" data-placement="bottom" title="Delete Release"
                >Delete</button>
              </div>
            </td>
          </tr>
          {% endfor %}
      </table> -->

        <!-- <div class="dropdown">
          <button class="btn btn-danger dropdown-toggle" type="button" data-toggle="dropdown">
            <span><i class="fa fa-plus"></i> Create a New Release</span>
            <span class="caret"></span>
          </button>
          <ul class="dropdown-menu">
            <li><a href="#">From the <b>latest version</b> of the dataset</a></li>
            <li><a href="#">From the <b>past version</b> of the dataset</a></li>
          </ul>
        </div> -->

        <div class="btn-group">
          <button type="button" class="btn btn-danger">
            <span><i class="fa fa-plus"></i> Add a New Release</span>
          </button>
          <button type="button" class="btn btn-danger dropdown-toggle" data-toggle="dropdown">
            <span class="caret"></span>
          </button>
          <ul class="dropdown-menu">
            <li><a href="#">From the <b>latest version</b> of the dataset</a></li>
            <li><a href="#">From a <b>past version</b> of the dataset</a></li>
          </ul>
        </div>

      </div>


  </div>
</div>

<!-- Modal -->
<br><br>
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" data-backdrop="false">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
            aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Create New Release</h4>
      </div>
      <div class="modal-body">
        <br><br>

        <div class="row">
          <div class="col-md-6">
            <p><b>Create release from:</b></p>
            <div class="list-group">
              <a href="#" class="list-group-item">The latest version of this dataset</a>
              <a href="#" class="list-group-item">An older version of this dataset</a>
            </div>
          </div>
        </div>

        <br><br>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger">Save</button>
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<script>
  $(function () {
    $('[data-toggle="tooltip"]').tooltip()
    $('.dropdown-toggle').dropdown();
  })
</script>

<!-- DeleteRelease -->
<br><br>
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#DeleteRelease" data-backdrop="false">
  DeleteRelease
</button>
<div class="modal fade" id="DeleteRelease" tabindex="1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Delete Release</h4>
      </div>
      <div class="modal-body">
        <h4>Are you sure you want to delete this release?</h4>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-danger">Yes</button>
      </div>
    </div>
  </div>
</div>

<!-- RestoreRelease -->
<br><br>
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#RestoreRelease" data-backdrop="false">
  RestoreRelease
</button>
<div class="modal fade" id="RestoreRelease" tabindex="1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Restore Release</h4>
      </div>
      <div class="modal-body">
        <h4>Are you sure you want to restore <code>2021-Q1</code> to the Current release?</h4>
        <h4>The new release will be named <code>Restored-2021-Q1</code></h4>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-danger">Yes</button>
      </div>
    </div>
  </div>
</div>

<!-- CreateANewRelease -->
<br><br>
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#CreateANewRelease" data-backdrop="false">
  CreateANewRelease
</button>
<div class="modal fade" id="CreateANewRelease" tabindex="1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Create a Release</h4>
      </div>
      <div class="modal-body">
        <h3>Select a dataset version:</h3>
        <br>
        <img src="https://i.imgur.com/luFaGy5.png" style="max-width: 100%;">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
      </div>
    </div>
  </div>
</div>

{# end test versioning #}